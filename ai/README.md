# GigaChat Summary CLI

CLI-инструмент для получения краткой выжимки (summary) текстовых сообщений через GigaChat API.

## Описание

Приложение позволяет получать краткие выжимки текста, отправляя его в GigaChat API. Поддерживает работу с файлами и прямым вводом текста через командную строку.

## Требования

- Python 3.10 или выше
- Аккаунт в GigaChat и API credentials (CLIENT_ID, CLIENT_SECRET)

## Установка

1. **Клонируйте репозиторий или скачайте файлы проекта**

2. **Создайте виртуальное окружение:**

   Для Windows:
   ```bash
   python -m venv venv
   ```

   Для Linux/Mac:
   ```bash
   python3 -m venv venv
   ```

3. **Активируйте виртуальное окружение:**

   Для Windows (PowerShell):
   ```bash
   .\venv\Scripts\Activate.ps1
   ```

   Для Windows (Command Prompt):
   ```bash
   venv\Scripts\activate.bat
   ```

   Для Linux/Mac:
   ```bash
   source venv/bin/activate
   ```

4. **Установите зависимости:**
   ```bash
   pip install -r requirements.txt
   ```

## Настройка

1. **Получите API credentials:**

   - Зарегистрируйтесь на [Sber Developers](https://developers.sber.ru/portal/products/gigachat)
   - Создайте приложение и получите CLIENT_ID и CLIENT_SECRET

2. **Создайте файл .env:**

   Скопируйте `env_example.txt` в `.env`:
   ```bash
   cp env_example.txt .env
   ```

   Или создайте файл `.env` вручную и укажите ваши credentials:
   ```
   CLIENT_ID=ваш_client_id
   CLIENT_SECRET=ваш_client_secret
   ```

## Использование

### Основная команда

```bash
python main.py summary [опции]
```

### Опции

- `--file <путь>` - Путь к файлу с текстом для обработки
- `--text "<текст>"` - Текст для обработки напрямую (приоритет над --file)

### Примеры

**Обработка текста из файла:**
```bash
python main.py summary --file messages.txt
```

**Обработка текста из аргумента:**
```bash
python main.py summary --text "Это длинный текст, который нужно сократить до краткой выжимки основных мыслей и фактов."
```

**Если указаны оба параметра, приоритет у --text:**
```bash
python main.py summary --file messages.txt --text "Этот текст будет обработан"
```

### Вывод

Приложение выводит краткую выжимку текста в консоль в отформатированном виде:

```
================================================================================
КРАТКАЯ ВЫЖИМКА:
================================================================================
[Текст выжимки здесь]
================================================================================
```

## Структура проекта

```
ai/
│
├── main.py              # CLI-приложение с обработкой команд
├── gigachat.py          # Модуль для работы с GigaChat API
├── utils.py             # Вспомогательные функции
├── requirements.txt     # Зависимости проекта
├── .env                 # Файл с credentials (не коммитить в git!)
├── env_example.txt      # Пример файла .env
└── README.md           # Документация
```

## Модули

### main.py
CLI-интерфейс приложения. Обрабатывает команды и аргументы, координирует работу модулей.

### gigachat.py
Модуль для работы с GigaChat API:
- `get_access_token()` - получение OAuth токена
- `generate_summary(text)` - генерация выжимки текста
- Обработка ошибок API

### utils.py
Вспомогательные функции:
- `read_file(file_path)` - чтение файла
- `validate_text(text)` - валидация текста
- `format_output(summary)` - форматирование вывода

## Обработка ошибок

Приложение обрабатывает следующие типы ошибок:

- **Ошибки аутентификации** - неверные CLIENT_ID/CLIENT_SECRET
- **Ошибки API** - проблемы с запросами к GigaChat API
- **Ошибки файлов** - файл не найден или не может быть прочитан
- **Ошибки валидации** - пустой текст или файл

## Логирование

Приложение логирует ключевые шаги:
- Получение OAuth токена
- Отправка запросов к API
- Чтение файлов
- Ошибки

Логи выводятся в консоль с уровнем INFO.

## Ограничения

- Максимальная длина ответа: 500 токенов
- Таймаут запроса: 60 секунд
- Таймаут получения токена: 30 секунд

## Устранение неполадок

### Ошибка аутентификации

```
Ошибка аутентификации: CLIENT_ID и CLIENT_SECRET должны быть установлены в .env файле
```

**Решение:** Проверьте, что файл `.env` существует и содержит правильные значения CLIENT_ID и CLIENT_SECRET.

### Файл не найден

```
Ошибка: Файл не найден: messages.txt
```

**Решение:** Убедитесь, что путь к файлу указан правильно и файл существует.

### Ошибка API

```
Ошибка API: 429 - Превышен лимит запросов
```

**Решение:** Подождите некоторое время перед повторным запросом.

## Дополнительная информация

- [Документация GigaChat API](https://developers.sber.ru/docs/ru/gigachat/api/overview)
- [Sber Developers Portal](https://developers.sber.ru/portal/products/gigachat)

## Лицензия

Этот проект создан в образовательных целях.
